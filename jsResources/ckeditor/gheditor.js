var ghEditorHelper=function(){function L(){return"nigh-"+Date.now()+Math.random().toString().substr(2,5)}function M(){setTimeout(function(){CKEDITOR.instances.editor1.focus()},0)}function q(){engine.trigger("FocusBrowser");M()}function N(a,b,c){try{CKEDITOR.instances.editor1.setData(a,function(){!0===b&&engine.trigger("CKEditorSetContentComplete");try{if(null!==c&&""!==c&&void 0!==c){q();var a=c.split(t),d={start:a[0].split(","),end:null,startOffset:parseInt(a[2],10),endOffset:parseInt(a[3],10),normalized:!1,
collapsed:!0,is2:!0},f=new CKEDITOR.dom.range(CKEDITOR.instances.editor1.document);f.moveToBookmark(d);f.select();f.scrollIntoView()}}catch(i){j("Error moving to bookmark err = "+i.message+"--Bookmark="+c)}if(0<r.length){for(a=r.pop();0<r.length;)r.shift();N(a.htmlContent,a.doCallback,a.bookmark,a.callId)}else x=!1})}catch(d){j("ckeSetData: "+d.message)}}function O(){try{return CKEDITOR.instances.editor1.mode}catch(a){}}function P(a){var b="";try{if(null!==a){var c=a.getElementsByTag("base");null!==
c&&0<c.count()&&(b=c.getItem(0).getAttribute("href"),b=b.substr(0,b.lastIndexOf("/")+1))}return b}catch(d){return b}}function u(){try{v&&(CKEDITOR.instances.editor1.getSelection().unlock(),v=!1)}catch(a){}}function s(){try{v&&u(),CKEDITOR.instances.editor1.getSelection().lock(),v=!0}catch(a){}}function k(){var a;a:{try{var b;b=CKEDITOR.instances.editor1.getData();var c="";if("source"!==O())try{var d=CKEDITOR.instances.editor1.getSelection();if(null!==d){var e=d.getRanges()[0].createBookmark2(!1);
null!==e&&(c=e.start+t+e.end+t+e.startOffset+t+e.endOffset)}}catch(g){}a=b+"--NIGHE-BOOKMARK:{"+c+"}";break a}catch(f){}a=void 0}engine.trigger("CKEditorContentChanged",a)}function Q(){engine.trigger("DelayedThumbnailUpdateCallback")}function C(){try{var a=CKEDITOR.instances.editor1,b=CKEDITOR.plugins.link.getSelectedLink(a);if(null!==b)return{isError:!1,value:b.getText()};for(var c=a.getSelection(),d=c.getNative(),a=0;a<d.rangeCount;a++)if(null!==d.getRangeAt(a).cloneContents().querySelector("img, .trigger, .quiz-container, .screenshot-control"))return{isError:!0,
value:""};return{isError:!1,value:c.getSelectedText()}}catch(e){return j(y+"getSelectedText() - "+e.message),{isError:!0,value:""}}}function A(a){for(;null!==a;){if(a.is("div")){var b=a.getAttribute("class");if(null!==b&&"trigger "===b.substring(0,8))break}a=a.getParent()}return a}function z(a){var b=null;null!==a&&(b=a.getSelectedElement(),null===b&&(b=a.getStartElement()));return b}function R(a){a=z(a);return A(a)}function n(a,b,c){try{u();if(null!==b)null!==b&&null!==a?(a.insertBefore(b),b.remove()):
j(l+"Error replacing element.");else try{CKEDITOR.instances.editor1.insertElement(a)}catch(d){j(l+"Error in insertElement API:errname="+d.name+"; message="+d.message);return}q();void 0!==c&&null!==c&&(c.getRanges()[0].moveToElementEditEnd(a),c.scrollIntoView());k()}catch(e){j(l+"Error inserting element:errname="+e.name+"; message="+e.message)}}function S(a,b,c,d){var e=CKEDITOR.instances.editor1,g=e.document.createElement("div");g.setAttributes({"class":"trigger-text"});c="<p>"+c+"</p>";if(null!==
d)for(var d=d.split("|"),f=0;f<d.length;)""!==d[f]&&(c+="<p>"+d[f]+"</p>"),f++;g.setHtml(c);e=e.document.createElement("div");c={};c["class"]=a;c["data-cke-pa-onclick"]=b;c.contenteditable="false";e.setAttributes(c);e.append(g);return e}function T(a){if(null!==a){var b=a.data("cke-pa-onclick");null===b&&(b=a.getAttribute("onClick"));if(null!==b)return b}return""}function p(a){if(null===a||void 0===a)return null;try{for(;null!==a;){if(a.is("div")){var b=a.getAttribute("class");if(null!==b&&"block-image"===
b)break}a=a.getParent()}}catch(c){a=null}return a}function ha(){try{var a=CKEDITOR.instances.editor1.getSelection();if(null===a)return"";var b=a.getStartElement();if(b.is("img")&&"video"===b.data("cke-real-element-type")){var a="",c=decodeURIComponent(b.data("cke-realelement")),d;if(!(d=$(c).attr("src"))){for(var b=null,e=$(c).children("source"),g=null,f=0;f<e.length;f++)if(g=e[f],"video/mp4"===$(g).attr("type").substring(0,9)){b=$(g).attr("src");break}d=b}a=a+("src|"+d+";")+("width|"+$(c).attr("width")+
";");a+="height|"+$(c).attr("height")+";";return a+="poster|"+$(c).attr("poster")+";"}return""}catch(i){}}function ia(a,b){try{var c=CKEDITOR.instances.editor1;c.focus();for(var d=new CKEDITOR.dom.element("table",c.document),e=d.append(new CKEDITOR.dom.element("tbody",c.document)),g=0;g<a;g++)for(var f=e.append(new CKEDITOR.dom.element("tr",c.document)),i=0;i<b;i++){var h=f.append(new CKEDITOR.dom.element("td",c.document));CKEDITOR.env.ie||h.append(new CKEDITOR.dom.element("br",c.document))}var j=
c.getSelection();n(d,null,j);setTimeout(function(){c.focus();var a=new CKEDITOR.dom.element(d.$.rows[0].cells[0]),b=new CKEDITOR.dom.range(c.document);b.moveToPosition(a,CKEDITOR.POSITION_AFTER_START);j.selectRanges([b]);D=!0},0)}catch(k){}}function E(a){var b=null;try{var c=CKEDITOR.instances.editor1.getSelection();if(null===c)return null;for(b=c.getStartElement();null!==b&&null===b.getAttribute(a);)b=b.getParent()}catch(d){b=null}return b}function U(){var a=CKEDITOR.instances.editor1,b=a.document.createElement("div"),
c={},d=L();c["class"]=F;c.contentEditable="false";c[B]=d;var a=a.document.createElement("img"),e={};e["class"]=ja;e.src="/screenshot/"+d+".png";a.setAttributes(e);b.append(a);b.setAttributes(c);return b}function V(a,b){try{G="100%";W=b;var c,d;isNaN(b)?(c=document.body.clientHeight,d=!1):(c=b,d=!0);CKEDITOR.instances.editor1.resize(G,c,d)}catch(e){}}function X(a){return"false"===a.getAttribute("contentEditable")||a.getAttribute("data-nostyle")}function Y(a,b){try{if(a){var c=CKEDITOR.instances.editor1,
d=CKEDITOR.config["colorButton_"+b+"Style"];c.removeStyle(new CKEDITOR.style(d,{color:"inherit"}));d.childRule="back"===b?function(a){return X(a)}:function(a){return!(a.is("a")||a.getElementsByTag("a").count())||X(a)};c.applyStyle(new CKEDITOR.style(d,{color:a}))}}catch(e){}}function Z(a){var a=a.replace(/[^\d,]/g,"").split(","),b={};b.R=parseInt(a[0]);b.G=parseInt(a[1]);b.B=parseInt(a[2]);b.A=a[3]?parseInt(a[3]):255;return b}function aa(a){for(;null!==a;){if(a.is("div")){var b=a.getAttribute("class");
if(null!==b&&b===F)break}a=a.getParent()}return a}function ba(a){var b={selectedElement:a,type:"none"};try{var c=null,d=null,e=null,g=null;if(null!==(c=aa(a)))b.selectedElement=c,b.type="screenshot";else if(null!==(d=p(a)))b.selectedElement=d,b.type="image";else if(a.is("img")&&!a.data("cke-realelement")&&!a.isReadOnly())b.selectedElement=a,b.type="image";else{for(c=a;null!==c&&(!c.is("a")||!c.getAttribute("href")||!(0<c.getChildCount())||c.isReadOnly());)c=c.getParent();if(null!==c)b.selectedElement=
a,b.type="hyperlink";else if(a.is("img")&&"video"===a.data("cke-real-element-type"))b.selectedElement=a,b.type="video";else if(null!==(e=A(a)))b.selectedElement=e,b.type="trigger";else if(null!==(g=E(H)))b.selectedElement=g,b.type="question"}}catch(f){}return b}function ca(a){var b;a:{try{var c=CKEDITOR.instances.editor1;if(null===a||void 0===a){var d=c.getSelection();if(null===d){b="";break a}a=z(d)}var d="",e=null;if(null!==(e=p(a)))var g=e.getAttribute("class"),d=d+("class|"+g+";"),a=e.getElementsByTag("img").getItem(0);
if(a.is("img")&&!a.data("cke-realelement")){var f=a.data("cke-saved-src")||a.getAttribute("src"),i=c.document;if(null!==i){var c=f,h=P(i);try{i=c,c.substring(0,h.length)===h&&(i=c.substr(h.length)),f=i}catch(j){f=c}}for(var d=d+("src|"+f+";"),k=a.getAttribute("style").split(";"),f=0;f<k.length;f++){var l=k[f].split(":"),o=l[0].trim().toLowerCase(),h="";switch(o){case "height":h=l[1].trim();h=h.substr(0,h.length-2);break;case "width":h=l[1].trim(),h=h.substr(0,h.length-2)}""!==h&&(d+=o+"|"+h+";")}var m=
a.getComputedStyle("float");void 0!==m&&(d+="float|"+m+";")}else d="";b=d;break a}catch(n){}b=void 0}engine.trigger("CKEditorDialogInitializationCallback","img",Array(b))}function da(){var a=ha();engine.trigger("CKEditorDialogInitializationCallback","video",Array(a))}function ea(a){"undefined"===typeof a&&(a="");engine.trigger("CKEditorDialogInitializationCallback","question",Array(a))}function ka(a){a.find("."+fa).each(function(){$(this).attr(B,L());$(this).attr("contenteditable","true")})}function la(a){a.find(".trigger").each(function(){var a=
$(this).attr("class"),c=$(this).attr("data-cke-pa-onclick"),d=$(this).children().first(),e=$(d).children().eq(0).text(),d=$(d).children().eq(1).text(),a=S(a,c,e,d);$(this).replaceWith($(a.$))})}function ma(a){a.find("."+F).each(function(){var a=U();$(this).replaceWith($(a.$))})}function na(a){try{var b=P(CKEDITOR.instances.editor1.document);a.find("[src]").each(function(){var a=$(this).attr("src"),c;c=null;a=a.replace(/^http:\/\//,"");if(a.match(/^localhost/)){var a=a.replace(/^localhost:\d+\//,""),
g=a.indexOf("/");c=a.substr(0,g);if("resources"===c)c="/"+a;else{a=a.substr(g+1);b=b.replace(/^http:\/\/localhost:\d+\/\w+\//,"");c=b.split("/");for(var g=a.split("/"),f=Math.min(c.length,g.length),i="",h=0;h<f&&c[h]===g[h];h++)i+=c[h]+"/";c=b.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../")+a.substring(i.length)}null!==c&&($(this).attr("src",c),$(this).attr("data-cke-saved-src",c))}})}catch(c){j(l+"Error while fixing source attribute during paste operation."+c.message)}}function ga(){var a=
CKEDITOR.instances.editor1.getSelection().getRanges()[0],b;!1===a.collapsed&&(0===a.endOffset&&0!==a.endContainer.getText().trim().length)&&(b=a.endContainer.getPrevious(),null!==b&&(a.setEnd(b,b.type===CKEDITOR.NODE_TEXT?b.getLength():b.getChildCount()),a.select()))}function I(a){var b;if(a.type===CKEDITOR.NODE_TEXT)return 0===a.getLength();if(a.is("img")||a.is("video"))return!1;if(a.is("br"))return!0;if(0!==a.getChildCount())for(var c=0,d=0,e=a.getChildCount();d<e;d++)if(b=a.getChild(d),b.type===
CKEDITOR.NODE_TEXT){if(!1===(0===b.getLength()))return!1}else if(b.is("br")){if(c++,1<c)return!1}else if(!1===I(b))return!1;return!0}var G="100%",W="100%",y="[NI_GH_MainPage] JS Error : ",l="[NI_GH_MainPage] CK Editor Error : ",B="data-ni-option-id",H="data-ni-question-type",fa="editableCell",F="screenshot-control",ja="image-holder",D=!1,x=!1,r=[],v=!1,t=";",J=["p","h1","h2","h3"],K={},o=[["image",CKEDITOR.TRISTATE_DISABLED],["video",CKEDITOR.TRISTATE_DISABLED],["table",CKEDITOR.TRISTATE_DISABLED],
["hyperlink",CKEDITOR.TRISTATE_DISABLED],["trigger",CKEDITOR.TRISTATE_DISABLED],["question",CKEDITOR.TRISTATE_DISABLED],["screenshot",CKEDITOR.TRISTATE_DISABLED]],j=function(a){console.log(a)};$(document).ready(function(){document.body.style.overflow="hidden"});$(window).load(function(){document.body.style.overflow="auto"});return{ckeErrorTag:l,coherentTag:"[NI_GH_MainPage] Coherent Error : ",editableCellCssClassName:fa,ghErrorTag:"[NI_GH_MainPage]",javascriptErrorTag:y,optionIdAttributeName:B,createHeaderStyles:function(){for(var a=
0;a<J.length;a++)K[a]=new CKEDITOR.style({element:J[a]})},focusAsync:q,getSelectedElementType:ba,getTriggerOnClickValue:T,handleOnKey:function(a){var b,c,d,e=CKEDITOR.instances.editor1.getSelection().getRanges()[0],g=e&&e.startContainer;switch(a.data.keyCode){case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:case CKEDITOR.CTRL+67:case CKEDITOR.CTRL+45:case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:case 8:case 46:ga()}if(a.data.keyCode in{8:1,46:1}&&!0===e.collapsed)switch(a.data.keyCode){case 8:if(e.checkBoundaryOfElement(g,
CKEDITOR.START)){for(d=g;d;){if(d.type===CKEDITOR.NODE_ELEMENT&&d.is("body")){c=null;break}if(d.hasPrevious()&&(c=d.getPrevious()))break;d=d.getParent()}if(c&&c.isReadOnly()){I(d)&&(d.remove(),k());e.selectNodeContents(c);e.select();a.cancel();return}}break;case 46:if(e.checkBoundaryOfElement(g,CKEDITOR.END)){for(c=g;c&&(!c.hasNext()||!(d=c.getNext()));)c=c.getParent();if(d&&d.isReadOnly()){I(c)&&(c.remove(),k());e.selectNodeContents(d);e.select();a.cancel();return}}}c=!0;d=null;try{b=CKEDITOR.instances.editor1.getSelection();
var f=z(b);d=A(f);null===d&&(d=E(H));null===d&&(d=aa(f));null===d&&(d=p(f))}catch(i){}null!==d&&(c=!1);b=d;if(!1===c&&(46===a.data.keyCode||8===a.data.keyCode))f=f=null,u(),b.hasPrevious()?(f=b.getPrevious(),f.isReadOnly()?e.selectNodeContents(f):e.moveToElementEditEnd(f)):b.hasNext()&&(f=b.getNext(),f.isReadOnly()?e.selectNodeContents(f):e.moveToElementEditStart(f)),e.select(),b.remove(),k(),a.cancel()},handleOnKeyPress:function(){ga()},handlePasteEvent:function(a){a=$("<p id='pasteContainer'></p>").append(a);
a.find(".quiz-container,.quiz-question-container,.submission-result,.quiz-question,.quiz-answer-container,textarea[data-ni-option-id],.quiz-option-container,.quiz-option-content,.quiz-option-input,.quiz-option-text,.quiz-submit-button,.quiz-feedback").remove();a.find("*").not("span").css("background-color","");a.find("table").removeAttr("bgcolor").removeAttr("border").removeAttr("cellpadding").removeAttr("cellspacing").removeAttr("style").removeAttr("width");a.find("td").removeAttr("height").removeAttr("style").removeAttr("width");
a.find("tr").removeAttr("height").removeAttr("style");ka(a);la(a);ma(a);na(a);return a.html()},handleSelectionChangeEvents:function(a){try{var b;if(a.data.selection.getType()===CKEDITOR.SELECTION_TEXT){a:{var c=a.editor;try{var d={};b:{try{var e={},g=C(),a=1,f="",i=!1;if(!1===g.isError){a=2<=g.value.length?!1:!0;c:{try{var h=CKEDITOR.plugins.link.getSelectedLink(CKEDITOR.instances.editor1),k=h&&h.getAttribute("href")||"",f=null===k?"":k;break c}catch(l){}f=void 0}switch(a){case !0:i=0===f.length?
0:2;break;case !1:if(i=0===f.length?1:2,1===i){var n=CKEDITOR.instances.editor1.getSelection().getRanges()[0];n&&!n.startContainer.equals(n.endContainer)&&(f="",i=0)}}}e.hyperlinkButtonStatus=i;e.hyperlinkUri=f;d=e;break b}catch(q){j(y+"Error while getting hyperlink"+q.message)}d=void 0}var g=[["IsBold","bold"],["IsItalic","italic"],["IsUnderline","underline"],["IsStrikethrough","strike"],["CanOutdent","outdent"],["CanIndent","indent"],["IsJustifyLeft","justifyleft"],["IsJustifyCenter","justifycenter"],
["IsJustifyRight","justifyright"],["IsJustifyBlock","justifyblock"],["IsNumberedList","numberedlist"],["IsBulletedList","bulletedlist"]],h={},m=c.getSelection().getStartElement(),r=m.getComputedStyle("font-size"),s=CKEDITOR.tools.convertToPx(r),t=m.getComputedStyle("font-family").split(",")[0].trim().replace(/^[']+/,"").replace(/[']+$/,""),u=Z(m.getComputedStyle("background-color")),v=Z(m.getComputedStyle("color")),p;b:{for(var w=c.elementPath(m),m=1;m<J.length;m++)if(K[m].checkActive(w)){p=m;break b}p=
0}for(w=0;w<g.length;w++)h[g[w][0]]=c.getCommand(g[w][1]).state;h.FontSize=s;h.FontFamily=t;h.HeaderStyle=p;h.BackgroundColor=u;h.ForegroundColor=v;h.HyperlinkUri=d.hyperlinkUri;h.HyperlinkButtonStatus=d.hyperlinkButtonStatus;b=h;break a}catch(x){j(y+"Error while getSelectedTextProperties."+x.message)}b=void 0}engine.trigger("OnSelectionChanged","text",JSON.stringify(b))}else{i=z(a.editor.getSelection());f=ba(i);b=0;if("none"===f.type)for(b=0;b<o.length;b++)o[b][1]=CKEDITOR.TRISTATE_ON;else for(b=
0;b<o.length;b++)o[b][1]=o[b][0]===f.type&&"screenshot"!==f.type?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_DISABLED;c="";for(b=0;b<o.length;b++)c+=o[b][0]+"|"+o[b][1]+";";d=c;e=a.editor.getSelection().getStartElement().getAscendant({td:1,th:1},!0);b=null;c="";null!==e?(D?(engine.trigger("TableInsertedCallback"),D=!1):engine.trigger("TableCellSelectedCallback"),c="tablecelleditable|",e.is("td")?(c=!0===e.hasAttribute(B)?c+"1;":c+"2;",c+="tablecellisrowheader|0;tablecelliscolumnheader|0;"):(c+="0;tablecellisrowheader|",
c=!0===CKEDITOR.plugins.nicustom.isRowHeader(e)?c+"1;":c+"2;",c+="tablecelliscolumnheader|",c=!0===CKEDITOR.plugins.nicustom.isColumnHeader(e)?c+"1;":c+"2;"),b=e.getAscendant("tbody"),c+="tablerowheader|",c=!0===CKEDITOR.plugins.nicustom.hasRowHeader(b)?c+"1;":c+"2;",c+="tablecolumnheader|",c=!0===CKEDITOR.plugins.nicustom.hasColumnHeader(b)?c+"1;":c+"2;"):engine.trigger("TableCellUnselectedCallback");engine.trigger("ButtonUpdateCallback",c,d)}}catch(A){}},initiateDelayedThumbnailUpdate:Q,lockSelection:s,
logError:j,notifyContentChanged:k,onResizeWindow:function(){try{V(G,W)}catch(a){}},setupCallbacks:function(){engine.on("FocusEditorAsync",function(){M()});engine.on("SetEditorMode",function(a){O()!==a[0]&&(CKEDITOR.instances.editor1.execCommand("source"),q())});engine.on("SetContent",function(a){var b=a[0],c=a[1],a=a[2];try{"string"===typeof b&&null!==b&&(!0===x?r.push({htmlContent:b,doCallback:c,bookmark:a}):(x=!0,N(b,c,a)))}catch(d){j("setContent: "+d.message)}});engine.on("ExecuteCommand",function(a){try{!1===
CKEDITOR.instances.editor1.execCommand(a)&&j(l+'Failed to execute "'+a+'"')}catch(b){j(l+"Exception at executeCommand :"+b.message)}});engine.on("FindReplace",function(){});engine.on("ResizeEditor",function(a){V(a[0],a[1])});engine.on("AddTrigger",function(a){try{var b=CKEDITOR.instances.editor1,c=S("trigger "+a[0],a[1],a[2],a[3]),d=b.getSelection(),e=R(d);n(c,e,d)}catch(g){j(y+g.message)}});engine.on("AddImage",function(a){var b=a[0],c=a[1],a=a[2];try{var d=CKEDITOR.instances.editor1;d.focus();var e=
d.getSelection(),g=z(e),f=null,i=null;null!==(i=p(g))?f=i:null!==g&&(g.is("img")&&!g.data("cke-realelement")&&!g.isReadOnly())&&(f=g);var g=null,h=d.document.createElement("img");h.setAttribute("alt","");h.setAttribute("src",b);h.setAttribute("style",c);null!==a&&"block-image"===a?(g=d.document.createElement("div"),g.setAttribute("contentEditable",!1),g.append(h)):g=h;""!==a&&g.setAttribute("class",a);n(g,f,e);Q()}catch(j){}});engine.on("AddVideo",function(a){var b=a[0],c=a[1],d=a[2],a=a[3];try{var e=
CKEDITOR.instances.editor1;e.focus();var g=e.getSelection(),f=g.getSelectedElement(),i=null;null!==f&&(f.is("img")&&"video"===f.data("cke-real-element-type"))&&(i=f);var f="",h=e.document.createElement("video");h.setAttribute("src",b);""!==c&&(h.setAttribute("poster",c),f+="background-image:url("+c+");");h.setAttribute("preload","metadata");""!==d&&(h.setAttribute("width",d),f+="width:"+d+"px;");""!==a&&(h.setAttribute("height",a),f+="height:"+a+"px;");h.setAttribute("controls","controls");var j=
e.createFakeElement(h,"cke_video","video",!1);j.setAttribute("style",f);n(j,i,g)}catch(k){}});engine.on("AddTable",function(a){ia(a[0],a[1])});engine.on("AddLink",function(a){a=a[0];try{var b=CKEDITOR.instances.editor1;b.focus();var c=b.getSelection(),d=C().value,e=null===c?null:c.getRanges(!0),g=CKEDITOR.plugins.link.getSelectedLink(b);if(null!==e&&0<e.length){var f=b.document.createElement("a");f.setText(d);f.setAttribute("href",a);e[0].deleteContents(!0);n(f,g,null);e[0].moveToElementEditEnd(f);
c.selectRanges(e)}q();k()}catch(i){j(l+"Error adding hyperlink:"+i.message)}});engine.on("RemoveLink",function(){try{var a=CKEDITOR.instances.editor1,b=CKEDITOR.plugins.link.getSelectedLink(a);null!==b&&b.is("a")&&b.remove(!0);k();a.selectionChange(!0)}catch(c){}});engine.on("AddQuestion",function(a){var b=a[0],a=a[1];try{var c=CKEDITOR.instances.editor1,d=c.getSelection(),e=null;if(null!==d)for(e=d.getStartElement();null!==e&&null===e.getAttribute(a);)e=e.getParent();var g=c.document.createElement("div");
g.appendHtml(b);var f=g.getChildren().getItem(0);f.type===CKEDITOR.NODE_ELEMENT&&f.setAttribute("contenteditable","false");n(f,e,d)}catch(i){}});engine.on("ApplyHeaderStyle",function(a){try{var b=CKEDITOR.instances.editor1;K[a[0]].apply(b.document);b.focus();k()}catch(c){}});engine.on("ApplyFontFamily",function(a){try{var b=CKEDITOR.instances.editor1;(new CKEDITOR.style(CKEDITOR.config.font_style,{family:a[0]})).apply(b.document);b.focus();k()}catch(c){}});engine.on("ApplyFontSize",function(a){try{var b=
CKEDITOR.instances.editor1;(new CKEDITOR.style(CKEDITOR.config.fontSize_style,{size:a[0]+"px"})).apply(b.document);b.focus();k()}catch(c){}});engine.on("ApplyBackgroundColor",function(a){a=a[0];if("transparent"===a){var a=CKEDITOR.instances.editor1,b=a.getSelection(),b=b&&b.getStartElement(),b=a.elementPath(b),b=b.block||b.blockLimit||a.document.getBody();do a=b&&b.getComputedStyle("background-color")||"transparent";while("transparent"===a&&b&&(b=b.getParent()));if(!a||"transparent"===a)a="#ffffff"}try{Y(a,
"back"),CKEDITOR.instances.editor1.focus(),k()}catch(c){}});engine.on("ApplyForegroundColor",function(a){try{Y(a[0],"fore"),CKEDITOR.instances.editor1.focus(),k()}catch(b){}});engine.on("LaunchFindReplace",function(){var a=C(),b=[];b[0]=!1===a.isError?a.value:"";engine.trigger("CKEditorDialogInitializationCallback","findReplace",b)});engine.on("GetSelectedTrigger",function(){s();var a=R(CKEDITOR.instances.editor1.getSelection()),b="";null!==a&&(b=T(a));engine.trigger("CKEditorDialogInitializationCallback",
"trigger",Array(b))});engine.on("GetSelectedImageInfo",function(){s();ca()});engine.on("GetSelectedVideoInfo",function(){s();da()});engine.on("GetSelectedQuestionInfo",function(){s();var a=E(H),b="";null!==a&&(b=a.getOuterHtml());ea(b)});engine.on("AddScreenshotControl",function(){try{var a=CKEDITOR.instances.editor1;a.focus();var b=a.getSelection();if(null!==b){var c=U();n(c,null,b)}}catch(d){j(l+"Error adding Screenshot Control:"+d.message)}});j=function(a){engine.trigger("logError",a)}},showImageDialog:ca,
showQuestionDialog:ea,showVideoDialog:da,unlockSelection:u}}();